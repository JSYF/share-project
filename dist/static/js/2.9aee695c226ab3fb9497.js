webpackJsonp([2],{"3cXf":function(t,a,e){t.exports={default:e("NUnD"),__esModule:!0}},FCbr:function(t,a,e){e("rYUz"),e("kUHi"),t.exports=e("/KQr").Array.from},IHPB:function(t,a,e){"use strict";a.__esModule=!0;var s,o=e("kfHR"),n=(s=o)&&s.__esModule?s:{default:s};a.default=function(t){if(Array.isArray(t)){for(var a=0,e=Array(t.length);a<t.length;a++)e[a]=t[a];return e}return(0,n.default)(t)}},NUnD:function(t,a,e){var s=e("/KQr"),o=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},Ny8c:function(t,a){},UJ2L:function(t,a,e){"use strict";var s=e("0hE2"),o=e("0ZA2");t.exports=function(t,a,e){a in t?s.f(t,a,o(0,e)):t[a]=e}},el00:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("IHPB"),o=e.n(s),n=e("3cXf"),i=e.n(n),r=e("aA9S"),c=e.n(r),l=e("gyMJ"),u={data:function(){return{show:!1,formData:{student_name:"",phone:"",remark:"",grade:[],subject:[],campus:[]},showOptions:{has_campus:"0",has_comment:"0",has_grade:"0",has_mobile:"0",has_name:"0",has_subject:"0"},formOptions:{grade:[],subject:[],campus:[]},title:"",type:"",actions:[]}},components:{"van-actionsheet":Actionsheet,"van-icon":Icon,"van-field":Field},created:function(){console.log(this.$route),this.form_id=this.$route.query.form_id,this.getPageData()},methods:{formValidate:function(){var t="",a=c()({},this.formData),e=c()({},this.showOptions);return a.student_name?11!==a.phone.length?t="请填写11位电话号码":1!=e.has_subject||a.subject.length?1!=e.has_campus||a.campus.length?1!=e.has_grade||a.grade.length||(t="请选择年级"):t="请选择校区":t="请选择科目":t="请填写学生姓名",!t.length||(this.$toast.fail(t),!1)},getPageData:function(){var t=this,a=this.form_id;Object(l.a)({id:a}).then(function(a){for(var e in console.log(a),t.user_id=a.data.user_id,t.title=a.data.title,t.formOptions)t.formOptions[e]=a.data[e];for(var s in t.showOptions)t.showOptions[s]=a.data[s]})},submit:function(){var t=this;if(this.formValidate()){var a=this.formData,e=a.grade[0]?[a.grade[0].id]:[],s=a.campus[0]?[a.campus[0].id]:[],o=(a.subject.length&&a.subject,{user_id:this.user_id,form_id:this.form_id,student_name:a.student_name,phone:a.phone,remark:a.remark,grade:i()(e),campus:i()(s),subject:i()(a.subject)});Object(l.e)(o).then(function(a){t.$toast.success("提交成功")}).catch(function(a){console.log(a),t.$toast.fail("提交失败,"+a)})}},showAction:function(t){this.type=t,this.actions=this.formOptions[t],this.show=!0},onSelect:function(t){console.log(t),this.formData[this.type][0]=t,this.show=!1},checkboxClick:function(t){console.log(t);var a=[].concat(o()(this.formData.subject)),e=a.indexOf(t.id);-1!==e?a.splice(e,1):a.push(t.id),this.formData.subject=a}}},m={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"parent_form"},[s("div",{staticClass:"page_title"},[t._v(t._s(t.title))]),t._v(" "),s("div",{staticClass:"form"},[1==t.showOptions.has_name?s("div",{staticClass:"form_item"},[s("span",{staticClass:"title"},[t._v("姓名")]),t._v(" "),s("div",{staticClass:"form_component"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.formData.student_name,expression:"formData.student_name",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"输入姓名",maxlength:"8"},domProps:{value:t.formData.student_name},on:{change:function(a){return t.$set(t.formData,"student_name",a.target.value)}}})])]):t._e(),t._v(" "),1==t.showOptions.has_mobile?s("div",{staticClass:"form_item"},[s("span",{staticClass:"title"},[t._v("手机号")]),t._v(" "),s("div",{staticClass:"form_component"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.formData.phone,expression:"formData.phone",modifiers:{lazy:!0}}],attrs:{type:"number",placeholder:"输入手机号",maxlength:"11",max:"11"},domProps:{value:t.formData.phone},on:{change:function(a){return t.$set(t.formData,"phone",a.target.value)}}})])]):t._e(),t._v(" "),1==t.showOptions.has_grade?s("div",{staticClass:"form_item"},[s("span",{staticClass:"title"},[t._v("年级")]),t._v(" "),s("div",{staticClass:"form_component"},[s("button",{on:{click:function(a){return t.showAction("grade")}}},[t._v("\n          "+t._s(t.formData.grade[0]?t.formData.grade[0].name:"选择年级")+"\n          "),s("img",{staticClass:"icon",attrs:{src:e("nK/p")}})])])]):t._e(),t._v(" "),1==t.showOptions.has_subject?s("div",{staticClass:"subject_group"},[s("p",{staticClass:"title"},[t._v("选择科目")]),t._v(" "),s("div",{staticClass:"check_group"},t._l(t.formOptions.subject,function(a){return s("div",{key:a.id,staticClass:"checkbox_item",on:{click:function(e){return t.checkboxClick(a)}}},[s("div",{staticClass:"checkbox",class:-1!==t.formData.subject.indexOf(a.id)?"checkbox_active":""},[s("van-icon",{attrs:{name:"success"}})],1),t._v(" "),s("span",[t._v(t._s(a.name))])])}),0)]):t._e(),t._v(" "),1==t.showOptions.has_campus?s("div",{staticClass:"form_item"},[s("span",{staticClass:"title"},[t._v("校区")]),t._v(" "),s("div",{staticClass:"form_component"},[s("button",{on:{click:function(a){return t.showAction("campus")}}},[t._v("\n          "+t._s(t.formData.campus[0]?t.formData.campus[0].name:"选择校区")+"\n          "),s("img",{staticClass:"icon",attrs:{src:e("nK/p")}})])])]):t._e(),t._v(" "),1==t.showOptions.has_comment?s("div",{staticClass:"form_item"},[s("span",{staticClass:"title"},[t._v("备注")]),t._v(" "),s("div",{staticClass:"form_component"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.formData.remark,expression:"formData.remark",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"输入备注",maxlength:"20"},domProps:{value:t.formData.remark},on:{change:function(a){return t.$set(t.formData,"remark",a.target.value)}}})])]):t._e()]),t._v(" "),s("van-actionsheet",{attrs:{actions:t.actions},on:{select:t.onSelect},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}}),t._v(" "),s("div",{staticClass:"bottom",on:{click:t.submit}},[t._v("提交")])],1)},staticRenderFns:[]};var f=e("C7Lr")(u,m,!1,function(t){e("Ny8c")},"data-v-392e1c27",null);a.default=f.exports},kUHi:function(t,a,e){"use strict";var s=e("I1yF"),o=e("2AZ7"),n=e("A2+p"),i=e("Hgu4"),r=e("1Hpz"),c=e("6f6n"),l=e("UJ2L"),u=e("jdnV");o(o.S+o.F*!e("Utzn")(function(t){Array.from(t)}),"Array",{from:function(t){var a,e,o,m,f=n(t),d="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,p=void 0!==v,_=0,A=u(f);if(p&&(v=s(v,h>2?arguments[2]:void 0,2)),void 0==A||d==Array&&r(A))for(e=new d(a=c(f.length));a>_;_++)l(e,_,p?v(f[_],_):f[_]);else for(m=A.call(f),e=new d;!(o=m.next()).done;_++)l(e,_,p?i(m,v,[o.value,_],!0):o.value);return e.length=_,e}})},kfHR:function(t,a,e){t.exports={default:e("FCbr"),__esModule:!0}},"nK/p":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAClUlEQVR4Xu2YzXHbMBCFFzyIx7gDxxXEriByB3YFMS9a6JSUkFSQ+ERCFzkVJB3EriBOBXY68FU6EBlkQA9MixyCxA9nsDoDu/s+vF0IZJD4jyWuHwgAOSBxAtQCiRuAhiC1ALVA4gSoBRI3AN0C1ALUAokToBZI3AB0C1AL2LTAZrM5lVL+0nsKRPxps9/X2rIsr7Is+zqmLisHVFX1wBh7awi5jA1Bi982NUkpHznnJ0NhWwEQQjwCwLER/Ikxdr5are6HJnS5ri1ex/6LiOYh9aa0BXABAD9aEaNA0O34+4A6K1daAVDJOqgHhWDMoiMTQF3XxXq9vrFxmTUAFVwI8QkAmqHzP5/qvTzPz4qieLIpwHatS/Eq9ygAGoIi/aEl4H6xWJz7guBa/CQAoSH4ED8ZQB8ERDyztXfXel/inQDQEG4B4L0pQEp5wzkvpkLoEi+lvOacq1k06Td6BphZt9vt0W63u2WMvXMJoUs8AHxHxKtJyvVmJwBULNcQVLz9fv8AAC+uOpfinbVAcxJdEADgCyJ+HnpiWrx6c5y29jg7+SauMwc0AbVt1Ux4YxY/9E9KSPHOHTAVQmjx3gCowLZOiCHeKwAVvCzLZZZlzfeDxiCv3g2xxHsHoCGojxXP73VN4RlCj/g7RFwOHZxj1zkfgocK6XpB1nV9qb/kvJj2Uso/eZ4vfb0pzBqDAOhxwiteIcUHaQFTYVVV3xhjH7vsGlp8cAAqoRDi0DNafU8IZvsoLWAmbUOIJT6KAxoQDYSY4qMCUMnVFRhi0vddkcFugbH3tO99BMA34bnHJwfM/YR810cO8E147vHJAXM/Id/1kQN8E557fHLA3E/Id33kAN+E5x6fHDD3E/JdX/IO+Af3OmdQY77oTwAAAABJRU5ErkJggg=="}});
//# sourceMappingURL=2.9aee695c226ab3fb9497.js.map